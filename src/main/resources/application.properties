spring.application.name=api-gateway
spring.config.import=optional:configserver:http://localhost:8888
server.port=8765

# Eureka
eureka.client.service-url.defaultZone=http://localhost:8761/eureka/
eureka.instance.prefer-ip-address=true

# --- CONFIGURATION RESILIENCE4J (CIRCUIT BREAKER) ---
# Temps d'attente maximum pour une réponse avant déclenchement du fallback (ex: 3 secondes)
resilience4j.timelimiter.configs.default.timeout-duration=3s

# Configuration du circuit : Si 50% des appels échouent sur une fenêtre de 10 appels, on ouvre le circuit
resilience4j.circuitbreaker.configs.default.sliding-window-size=10
resilience4j.circuitbreaker.configs.default.failure-rate-threshold=50
resilience4j.circuitbreaker.configs.default.wait-duration-in-open-state=10s

# --- ACTUATOR ---
management.endpoints.web.exposure.include=*
management.endpoint.health.show-details=always
# Permet de voir l'état des circuits breakers via actuator
management.health.circuitbreakers.enabled=true

# Logs
logging.level.sn.esmt.msi.apigateway=DEBUG
# Optionnel : pour voir le détail des décisions du circuit breaker
logging.level.io.github.resilience4j=DEBUG